{% extends 'admin_base.html' %}

{% block admin_content %}
{% load money %}
<div class="row">
    <div class="col s12 m5" id="income_form">
        <h3>{{ club.club_name }}</h3>
        <form method="POST" id="acc_form">
            {% csrf_token %}
            {{ income_form.as_p }}
            <button type="submit">입력</button>
        </form>
    </div>
    <div class="col s12 m5 offset-m2" id="expd_form">
        <form method="POST" id="acc_form" enctype="multipart/form-data">
            {% csrf_token %}
            {{ expenditure_form.as_p }}
            <button type="submit">입력</button>
        </form>
        </div>
</div>

<div class="divider"></div>
<div id="account_sum">
    <h4>총액: {{ club.accounting.account_sum|won }}</h4>
    <div id="income_sum">
        <table class="striped bordered">
            <thead>
              <tr id="income_tr">
                  <th id='first'>수입 내역</th>
                  <th id="second">금액</th>
                  <th id="third">수입 일자</th>
                  <th id="fourth"></th>
              </tr>
            </thead>
            <tbody>
                {% for income in income_all %}
                <tr id="income_tr">
                    <td id='first'>{{ income.detail }}</td>
                    <td id="second">{{ income.amount|won }}</td>
                    <td id="third">{{ income.income_at|date:"Y.m.d" }}</td>
                    <td id="fourth">
                        <a href="#"><i class="material-icons">edit</i></a>
                        <a href="#"><i class="material-icons">delete_forever</i></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div id="expd_sum">
        <table class="striped bordered">
            <thead>
              <tr id="expd_tr">
                  <th id='first'>지출 내역</th>
                  <th id="second">금액</th>
                  <th id="third">지출 일자</th>
                  <th id="fourth">영수증</th>
                  <th id="fifth"></th>
              </tr>
            </thead>
            <tbody>
                {% for expd in expd_all %}
                <tr id="expd_tr">
                    <td id='first'>{{ expd.detail }}</td>
                    <td id="second">{{ expd.amount|won }}</td>
                    <td id="third">{{ expd.expd_at|date:"Y.m.d" }}</td>
                    <td id="fourth">
                        {% if expd.receipt %}
                        <a href="{{ expd.receipt_url }}" target="popup" onclick="window.open('{{ expd.receipt_url }}','popup','width=400,height=500'); return false;">
                            <img class="responsive-img receipt_image" src="/static/img/receipt.png">
                        </a>
                        {% else %}
                        <img class="responsive-img receipt_image" src="/static/img/no_receipt.png">
                        {% endif %}
                    </td>
                    <td id="fifth">
                        <a href="#"><i class="material-icons">edit</i></a>
                        <a href="#"><i class="material-icons">delete_forever</i></a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
$(function() {
    $("#id_income-income_at").datepicker({
        changeMonth: false,
        dayNames: ['월요일', '화요일', '수요일', '목요일', '금요일', '토요일', '일요일'],
        dayNamesMin: ['월', '화', '수', '목', '금', '토', '일'],
        monthNamesShort: ['1','2','3','4','5','6','7','8','9','10','11','12'],
        monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월']
    });
});
</script>
<script>
$(function() {
    $("#id_expd-expd_at").datepicker({
        changeMonth: false,
        numberOfMonths: [2,2],
        dayNames: ['월요일', '화요일', '수요일', '목요일', '금요일', '토요일', '일요일'],
        dayNamesMin: ['월', '화', '수', '목', '금', '토', '일'],
        monthNamesShort: ['1','2','3','4','5','6','7','8','9','10','11','12'],
        monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월']
    });
});
</script>
<script>
  $(document).ready(function() {
    $('select').material_select();
  });
</script>
{% endblock %}